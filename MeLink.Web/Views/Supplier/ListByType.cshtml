@model MeLink.Web.ViewModels.UserSuppliersViewModel

@{
    ViewData["Title"] = Model.PageTitle;
}

<div class="container py-5">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-5">
        <div class="text-center text-md-start mb-3 mb-md-0">
            <h1 class="display-6 fw-bold text-dark">@Model.PageTitle</h1>
            <p class="text-muted lead-sm">Browse suppliers of this type and place your order.</p>
        </div>
        <div>
            <a asp-controller="Supplier" asp-action="Index" class="btn btn-outline-secondary rounded-pill px-4 shadow-sm">
                <i class="fas fa-arrow-left me-2"></i>Back to Types
            </a>
        </div>
    </div>

    @if (!Model.Suppliers.Any())
    {
        <div class="alert alert-info text-center rounded-3 p-4" role="alert">
            <h5 class="alert-heading"><i class="fas fa-info-circle me-2"></i> No Suppliers Found</h5>
            <p class="mb-0">It seems there are no suppliers of this type available at the moment.</p>
        </div>
    }
    else
    {
        <div class="row g-4">
            @foreach (var supplier in Model.Suppliers)
            {
                <div class="col-md-6 col-lg-4">
                    <div class="card shadow-sm h-100 border-0 rounded-4 supplier-card">
                        <div class="card-body p-4">
                            <div class="d-flex align-items-center mb-3">
                                @{
                                    string userIcon = supplier.UserType switch
                                    {
                                        "Manufacturer" => "fas fa-industry text-warning",
                                        "MedicineWarehouse" => "fas fa-warehouse text-info",
                                        "DistributionCompany" => "fas fa-truck text-success",
                                        _ => "fas fa-building text-muted"
                                    };
                                }
                                <div class="icon-circle @GetIconBgClass(supplier.UserType) me-3">
                                    <i class="@userIcon fa-2x"></i>
                                </div>
                                <div>
                                    <h5 class="mb-0 fw-bold">@supplier.DisplayName</h5>
                                    <small class="text-muted">@supplier.UserType</small>
                                </div>
                            </div>
                            <div class="d-flex align-items-center mb-4">
                                <i class="fas fa-map-marker-alt text-muted me-2"></i>
                                <span class="text-muted small">@supplier.Address, @supplier.City</span>
                            </div>
                            <div class="d-grid">
                                <a asp-controller="Order" asp-action="BrowseMedicines" asp-route-supplierId="@supplier.UserId" class="btn btn-primary rounded-pill px-4">
                                    <i class="fas fa-pills me-2"></i>Browse Medicines
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

@section Scripts {
    <style>
        .rounded-4 {
            border-radius: 1.5rem !important;
        }

        .rounded-pill {
            border-radius: 50rem !important;
        }

        .shadow-sm {
            box-shadow: 0 .125rem .25rem rgba(0,0,0,.075) !important;
        }

        .icon-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa; /* Default bg */
        }

        .lead-sm {
            font-size: 1.15rem;
        }

        .supplier-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

            .supplier-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
            }

        .bg-primary-subtle {
            background-color: #e0f2fe !important;
        }

        .bg-info-subtle {
            background-color: #cff4fc !important;
        }

        .bg-success-subtle {
            background-color: #d1e7dd !important;
        }

        .bg-warning-subtle {
            background-color: #fff3cd !important;
        }
    </style>
}

@functions {
    string GetIconBgClass(string userType)
    {
        return userType switch
        {
            "Manufacturer" => "bg-warning-subtle",
            "MedicineWarehouse" => "bg-info-subtle",
            "DistributionCompany" => "bg-success-subtle",
            _ => "bg-light"
        };
    }
}